<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GameScipt Code Snippets</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fontsource/cascadia-code@4.2.1/index.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">

    <style>
        :root {
            /* --- SCALING FACTOR --- */
            --scale-factor: 0.85;
            /* --- END SCALING FACTOR --- */

            /* Colors */
            --color-bg-primary: #0A0F1E;
            --color-bg-secondary: #10182F;
            --color-bg-tertiary: #1A2340;
            --color-text-primary: #E1E8FF;
            --color-text-secondary: #A0A8C8;
            --color-text-code-base: var(--color-text-secondary);
            --color-title-primary: #FFFFFF;
            --color-title-secondary: #E1E8FF;
            --color-border-primary: #2A3B6F;
            --color-accent-mango-gold: #FFC107; /* Simplified variable name */
            --color-accent-leaf-green: #4CAF50;
            --color-accent-electric-blue: #00AFFF;
            --color-error-red: #F44336;

            /* Fonts */
            --font-primary: 'Cascadia Code', 'Roboto Mono', monospace;
            --font-display: 'Cascadia Code', 'Roboto Mono', monospace; /* Will use this for header */
            --font-code: 'Cascadia Code', 'Roboto Mono', monospace;

            /* Shadows */
            --shadow-glow-gold: 0 0 calc(18px * var(--scale-factor)) rgba(255, 193, 7, 0.35), 0 0 calc(6px * var(--scale-factor)) rgba(255, 193, 7, 0.25);
            --shadow-glow-green: 0 0 calc(15px * var(--scale-factor)) rgba(76, 175, 80, 0.3), 0 0 calc(5px * var(--scale-factor)) rgba(76, 175, 80, 0.2);
            --shadow-glow-error: 0 0 calc(15px * var(--scale-factor)) rgba(244, 67, 54, 0.35), 0 0 calc(5px * var(--scale-factor)) rgba(244, 67, 54, 0.25);
            --shadow-glow-blue-subtle: 0 0 calc(12px * var(--scale-factor)) rgba(0, 175, 255, 0.2);

            --code-line-height: 1.6;
            --animation-duration-fast: 0.2s;
            --animation-duration-medium: 0.4s;
            --animation-duration-slow: 0.6s;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        p { /* General paragraph, not specific to snippet explanation */
            font-family: var(--font-primary); /* Changed to primary for better readability */
            font-size: calc(1em * var(--scale-factor));
            color: var(--color-text-secondary);
            margin-bottom: calc(20px * var(--scale-factor));
            line-height: 1.7;
        }
        .copy-instructions { /* Specific styling for this paragraph */
            font-family: var(--font-code); /* Keeping this as per original for this specific p */
            text-align: center;
            opacity: 0; /* For load animation */
            transform: translateY(calc(10px * var(--scale-factor))); /* For load animation */
            animation: fadeInSlideUp var(--animation-duration-medium) ease-out var(--animation-duration-fast) forwards;
        }


        body {
            font-family: var(--font-primary); /* Default to primary font */
            line-height: 1.7;
            color: var(--color-text-primary);
            background: linear-gradient(135deg, var(--color-bg-primary) 0%, #080B1A 100%);
            padding: calc(25px * var(--scale-factor));
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .container {
            max-width: calc(1200px * var(--scale-factor));
            margin: 0 auto;
            padding: 0 calc(20px * var(--scale-factor));
        }

        header {
            text-align: center;
            margin-bottom: calc(60px * var(--scale-factor));
            padding-bottom: calc(25px * var(--scale-factor));
            border-bottom: calc(2px * var(--scale-factor)) solid var(--color-accent-mango-gold);
            opacity: 0; /* For load animation */
            transform: translateY(calc(-20px * var(--scale-factor))); /* For load animation */
            animation: fadeInSlideDown var(--animation-duration-medium) ease-out forwards;
        }

        header h1 {
            font-family: var(--font-display); /* Changed to Orbitron */
            font-size: calc(3.2em * var(--scale-factor));
            color: var(--color-title-primary);
            letter-spacing: calc(1.5px * var(--scale-factor));
            font-weight: 700;
            text-shadow: 0 0 calc(10px * var(--scale-factor)) rgba(255, 193, 7, 0.3); /* Subtle gold glow */
            transition: text-shadow var(--animation-duration-fast) ease;
        }


        .snippet-entry {
            background-color: var(--color-bg-secondary);
            border: 1px solid var(--color-border-primary);
            border-radius: calc(12px * var(--scale-factor));
            margin-bottom: calc(40px * var(--scale-factor));
            box-shadow: 0 calc(10px * var(--scale-factor)) calc(30px * var(--scale-factor)) rgba(0,0,0,0.3), 0 0 0 1px var(--color-border-primary);
            transition: transform var(--animation-duration-fast) ease-out, box-shadow var(--animation-duration-fast) ease-out;
            overflow: hidden;
            cursor: default; /* Changed from pointer as whole card copy is an option, not primary action */
            opacity: 0; /* For staggered load animation */
            transform: translateY(calc(30px * var(--scale-factor))); /* For staggered load */
        }
         .snippet-entry.visible { /* Class added by JS for IntersectionObserver */
            opacity: 1;
            transform: translateY(0);
            transition-property: opacity, transform;
            transition-duration: var(--animation-duration-medium);
            transition-timing-function: ease-out;
        }


        .snippet-entry:hover {
            transform: translateY(calc(-5px * var(--scale-factor))) scale(1.01);
            box-shadow: 0 calc(10px * var(--scale-factor)) calc(25px * var(--scale-factor)) rgba(0,0,0,0.3), var(--shadow-glow-gold), 0 0 0 1px var(--color-accent-mango-gold);
        }
        /* Click feedback animation for snippet entry */
        .snippet-entry.copied-feedback {
            animation: borderFlash var(--animation-duration-medium) ease-out;
        }

        .snippet-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: calc(18px * var(--scale-factor)) calc(24px * var(--scale-factor));
            background-color: var(--color-bg-tertiary);
            border-bottom: 1px solid var(--color-border-primary);
            position: relative;
            cursor: pointer; /* Make header clickable for expand/collapse */
        }

        .snippet-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; width: 100%;
            height: calc(3px * var(--scale-factor));
            background: var(--color-accent-mango-gold);
            opacity: 1;
            box-shadow: var(--shadow-glow-gold);
            transform: scaleX(0); /* Initial state for animation */
            transform-origin: left;
            transition: transform var(--animation-duration-medium) ease-out;
        }
        .snippet-entry:hover .snippet-header::before {
            transform: scaleX(1); /* Animate line on hover */
        }


        .snippet-title-wrapper { /* Wrapper for title and toggle icon */
            display: flex;
            align-items: center;
            gap: calc(10px * var(--scale-factor));
        }

        .snippet-title {
            font-family: var(--font-code);
            font-size: calc(1.5em * var(--scale-factor));
            color: var(--color-title-secondary);
            font-weight: 700;
            letter-spacing: calc(0.5px * var(--scale-factor));
            text-shadow: none;
        }

        .explanation-toggle-icon {
            width: calc(18px * var(--scale-factor));
            height: calc(18px * var(--scale-factor));
            fill: var(--color-text-secondary);
            transition: transform var(--animation-duration-fast) ease-out;
        }
        .explanation-toggle-icon.expanded {
            transform: rotate(180deg);
        }


        .snippet-explanation {
            font-size: calc(1em * var(--scale-factor));
            color: var(--color-text-secondary);
            padding: 0 calc(24px * var(--scale-factor)); /* Remove top/bottom padding */
            background-color: var(--color-bg-secondary);
            max-height: 0; /* Initially collapsed */
            opacity: 0; /* Initially hidden */
            overflow: hidden;
            transition: max-height var(--animation-duration-medium) ease-in-out,
                        opacity var(--animation-duration-medium) ease-in-out,
                        padding-top var(--animation-duration-medium) ease-in-out, /* Animate padding */
                        padding-bottom var(--animation-duration-medium) ease-in-out;
        }
        .snippet-explanation.expanded {
            max-height: calc(500px * var(--scale-factor)); /* Adjust as needed */
            opacity: 1;
            padding-top: calc(18px * var(--scale-factor)); /* Add padding back when expanded */
            padding-bottom: calc(18px * var(--scale-factor));
        }


        .snippet-explanation code {
            background-color: rgba(255, 193, 7, 0.15);
            padding: calc(0.2em * var(--scale-factor)) calc(0.5em * var(--scale-factor));
            margin: 0 calc(0.1em * var(--scale-factor));
            border-radius: calc(4px * var(--scale-factor));
            font-family: var(--font-code);
            font-size: 0.9em;
            color: var(--color-accent-mango-gold);
            border: 1px solid rgba(255, 193, 7, 0.4);
        }

        .code-block-wrapper { position: relative; }

        pre[class*="language-"] {
            position: relative;
            background-color: var(--color-bg-primary) !important; /* Ensure our bg takes precedence */
            color: var(--color-text-code-base);
            padding-top: calc(20px * var(--scale-factor));
            padding-right: calc(24px * var(--scale-factor));
            padding-bottom: calc(20px * var(--scale-factor));
            padding-left: calc(50px * var(--scale-factor)); /* Space for custom line numbers */
            border-radius: 0 0 calc(10px * var(--scale-factor)) calc(10px * var(--scale-factor));
            overflow: auto; margin: 0;
            border-top: 1px dashed var(--color-border-primary);
            -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
            font-size: calc(0.9em * var(--scale-factor)); /* Apply scaling to pre for Prism font size base */
        }

        pre[class*="language-"] code {
            font-family: var(--font-code) !important; /* Ensure font consistency */
            font-size: 1em; /* Inherit from pre, effectively calc(0.9em * var(--scale-factor)) */
            line-height: var(--code-line-height);
            color: inherit; white-space: pre; padding: 0;
            background: none !important; text-shadow: none !important;
            display: block;
        }

        .custom-line-numbers-column {
            position: absolute; left: 0;
            top: calc(20px * var(--scale-factor));
            width: calc(40px * var(--scale-factor));
            padding-right: calc(10px * var(--scale-factor));
            text-align: right; color: var(--color-text-secondary);
            font-family: var(--font-code);
            font-size: 1em; /* Match code's effective font size */
            line-height: var(--code-line-height);
            white-space: pre; user-select: none; pointer-events: none;
            vertical-align: top;
        }

        /* Prism Tomorrow theme overrides (if needed, or choose a more fitting theme) */
        /* The loaded prism-tomorrow.min.css will handle token colors. */
        /* We are overriding some basic token colors here for example, */
        /* usually you'd let the theme do its job or create a custom Prism theme. */
        .token.comment, .token.prolog, .token.cdata { color: #708090; } /* Slatery Gray */
        .token.keyword, .token.selector, .token.important, .token.atrule, .token.builtin { color: var(--color-accent-electric-blue); }
        .token.operator, .token.punctuation, .token.attr-name { color: var(--color-text-secondary); }
        .token.tag, .token.tag .punctuation, .token.doctype { color: var(--color-accent-mango-gold); }
        .token.string, .token.char { color: var(--color-accent-leaf-green); }
        .token.function { color: var(--color-accent-electric-blue); }
        .token.property, .token.constant, .token.variable { color: #e06c75; } /* Light red for variables - example */
        .token.number { color: #d19a66; } /* Orange for numbers - example */


        .copy-button {
            display: inline-flex; align-items: center; gap: calc(8px * var(--scale-factor));
            background: linear-gradient(145deg, var(--color-bg-tertiary), var(--color-bg-secondary));
            color: var(--color-text-secondary); border: 1px solid var(--color-border-primary);
            padding: calc(8px * var(--scale-factor)) calc(16px * var(--scale-factor));
            font-size: calc(0.85em * var(--scale-factor)); font-weight: 500;
            font-family: var(--font-code); border-radius: calc(6px * var(--scale-factor));
            cursor: pointer; transition: all 0.2s ease-in-out;
            box-shadow: 0 calc(2px * var(--scale-factor)) calc(5px * var(--scale-factor)) rgba(0,0,0,0.2);
            position: relative; /* For icon positioning if needed */
            overflow: hidden; /* Helps with icon transitions if they slide */
        }
        .copy-button .copy-icon, .copy-button .copied-icon {
            width: calc(16px * var(--scale-factor)); height: calc(16px * var(--scale-factor));
            transition: opacity var(--animation-duration-fast) ease, transform var(--animation-duration-fast) ease;
            position: absolute; /* Position icons on top of each other */
            left: calc(16px * var(--scale-factor)); /* Align with padding */
            top: 50%; transform: translateY(-50%);
        }
        .copy-button .copy-icon { opacity: 1; }
        .copy-button .copied-icon { opacity: 0; transform: translateY(-50%) scale(0.8); }
        .copy-button .button-text {
            margin-left: calc(24px * var(--scale-factor)); /* Make space for the absolute positioned icon */
            transition: opacity var(--animation-duration-fast) ease;
        }

        .copy-button.copied .copy-icon { opacity: 0; transform: translateY(-50%) scale(0.8); }
        .copy-button.copied .copied-icon { opacity: 1; transform: translateY(-50%) scale(1); }


        .copy-button:hover {
            background: linear-gradient(145deg, var(--color-bg-secondary), var(--color-bg-tertiary));
            color: var(--color-accent-mango-gold); border-color: var(--color-accent-mango-gold);
            box-shadow: 0 calc(4px * var(--scale-factor)) calc(10px * var(--scale-factor)) rgba(0,0,0,0.3), var(--shadow-glow-gold);
            transform: translateY(calc(-2px * var(--scale-factor)));
        }
        .copy-button:active {
            transform: translateY(0px);
            box-shadow: 0 calc(2px * var(--scale-factor)) calc(5px * var(--scale-factor)) rgba(0,0,0,0.2);
        }

        footer {
            text-align: center; margin-top: calc(80px * var(--scale-factor));
            padding: calc(30px * var(--scale-factor)) 0;
            font-size: calc(0.9em * var(--scale-factor)); color: var(--color-text-secondary);
        }
        footer a {
            color: var(--color-accent-mango-gold); text-decoration: none; font-weight: 500;
            transition: color 0.2s ease, text-shadow 0.2s ease;
        }
        footer a:hover {
            color: var(--color-text-primary); text-decoration: none;
            text-shadow: 0 0 calc(8px * var(--scale-factor)) var(--color-accent-mango-gold);
        }

        .copy-popup {
            position: fixed; left: 50%; top: 20%;
            transform: translate(-50%, -50%) scale(0.9); /* Start smaller for pop animation */
            background-color: var(--color-bg-tertiary); color: var(--color-text-primary);
            padding: calc(20px * var(--scale-factor)) calc(30px * var(--scale-factor));
            border-radius: calc(8px * var(--scale-factor)); border: 1px solid var(--color-border-primary);
            box-shadow: 0 calc(5px * var(--scale-factor)) calc(15px * var(--scale-factor)) rgba(0,0,0,0.5);
            z-index: 1000; display: flex; align-items: center;
            gap: calc(10px * var(--scale-factor)); opacity: 0; visibility: hidden;
            transition: opacity var(--animation-duration-fast) ease,
                        visibility 0s linear var(--animation-duration-fast),
                        top var(--animation-duration-fast) ease,
                        transform var(--animation-duration-fast) cubic-bezier(0.68, -0.55, 0.27, 1.55); /* Elastic pop */
            font-family: var(--font-primary); font-size: calc(1.1em * var(--scale-factor));
        }
        .copy-popup.show {
            opacity: 1; visibility: visible;
            top: calc(50px + (20px * var(--scale-factor)));
            transform: translate(-50%, 0) scale(1); /* End at final size */
            transition: opacity var(--animation-duration-fast) ease,
                        visibility 0s linear 0s,
                        top var(--animation-duration-fast) ease,
                        transform var(--animation-duration-fast) cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }
        .copy-popup .popup-icon {
            width: calc(24px * var(--scale-factor)); height: calc(24px * var(--scale-factor));
        }
        .copy-popup.success {
            border-left: calc(5px * var(--scale-factor)) solid var(--color-accent-leaf-green);
            box-shadow: 0 calc(5px * var(--scale-factor)) calc(15px * var(--scale-factor)) rgba(0,0,0,0.5), var(--shadow-glow-green);
        }
        .copy-popup.error {
            border-left: calc(5px * var(--scale-factor)) solid var(--color-error-red);
            box-shadow: 0 calc(5px * var(--scale-factor)) calc(15px * var(--scale-factor)) rgba(0,0,0,0.5), var(--shadow-glow-error);
        }

        /* Keyframes for animations */
        @keyframes fadeInSlideDown {
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeInSlideUp {
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes borderFlash {
            0% { box-shadow: 0 calc(10px * var(--scale-factor)) calc(30px * var(--scale-factor)) rgba(0,0,0,0.3), 0 0 0 1px var(--color-border-primary); }
            50% { box-shadow: 0 calc(10px * var(--scale-factor)) calc(30px * var(--scale-factor)) rgba(0,0,0,0.3), 0 0 0 calc(3px * var(--scale-factor)) var(--color-accent-leaf-green), var(--shadow-glow-green); }
            100% { box-shadow: 0 calc(10px * var(--scale-factor)) calc(30px * var(--scale-factor)) rgba(0,0,0,0.3), 0 0 0 1px var(--color-border-primary); }
        }


        @media (max-width: 768px) {
            body { padding: calc(15px * var(--scale-factor)); }
            header h1 { font-size: calc(2.2em * var(--scale-factor)); }
            .snippet-title { font-size: calc(1.25em * var(--scale-factor)); }
            pre[class*="language-"] { font-size: calc(0.85em * var(--scale-factor)); padding-top: calc(16px * var(--scale-factor)); padding-right: calc(16px * var(--scale-factor)); padding-bottom: calc(16px * var(--scale-factor)); padding-left: calc(40px * var(--scale-factor)); }
            .custom-line-numbers-column { width: calc(30px * var(--scale-factor)); padding-right: calc(8px * var(--scale-factor)); top: calc(16px * var(--scale-factor)); font-size: 1em;}
            .copy-button { padding: calc(6px * var(--scale-factor)) calc(12px * var(--scale-factor)); font-size: calc(0.8em * var(--scale-factor)); }
            .copy-button .button-text { margin-left: calc(20px * var(--scale-factor));} /* Adjust for smaller icons */
            .copy-button .copy-icon, .copy-button .copied-icon { left: calc(12px * var(--scale-factor)); }

            .snippet-header { padding: calc(12px * var(--scale-factor)) calc(16px * var(--scale-factor)); }
            .snippet-explanation { padding: 0 calc(16px * var(--scale-factor)); font-size: calc(0.95em * var(--scale-factor));}
            .snippet-explanation.expanded { padding-top: calc(12px * var(--scale-factor)); padding-bottom: calc(12px * var(--scale-factor)); }
            .copy-popup { font-size: calc(1em * var(--scale-factor)); padding: calc(15px * var(--scale-factor)) calc(20px * var(--scale-factor));}
        }
        @media (max-width: 480px) {
            header h1 { font-size: calc(1.8em * var(--scale-factor)); }
            .snippet-header { gap: calc(10px * var(--scale-factor)); }
            pre[class*="language-"] { font-size: calc(0.8em * var(--scale-factor)); padding-left: calc(35px * var(--scale-factor));}
            .custom-line-numbers-column { width: calc(25px * var(--scale-factor)); padding-right: calc(5px * var(--scale-factor)); font-size: 1em;}
            .copy-popup { width: 85%; }
        }

        ::-webkit-scrollbar { width: calc(10px * var(--scale-factor)); height: calc(10px * var(--scale-factor)); }
        ::-webkit-scrollbar-track { background: var(--color-bg-primary); border-radius: calc(5px * var(--scale-factor)); }
        ::-webkit-scrollbar-thumb { background: var(--color-border-primary); border-radius: calc(5px * var(--scale-factor)); border: calc(2px * var(--scale-factor)) solid var(--color-bg-primary); }
        ::-webkit-scrollbar-thumb:hover { background: var(--color-accent-mango-gold); }
    </style>
</head>
<body>
    <header>
        <h1>GameScipt Code Snippets</h1> </header>

    <main class="container">
        <p class="copy-instructions">Click on snippet headers to expand/collapse. Click the copy button or the card body to copy!</p>
        <p class="copy-instructions">Paste the copied code into the <strong>Command Terminal</strong> and press <strong>Ctrl + Shift + C</code> to Compile</p>

        <section class="snippet-entry">
            <div class="snippet-header">
                <div class="snippet-title-wrapper">
                    <h2 class="snippet-title">Turn To Enemy and Shoot</h2>
                    <svg class="explanation-toggle-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"></path></svg>
                </div>
                <button class="copy-button" aria-label="Copy code to clipboard">
                    <svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor"> <path d="M13 0H6a2 2 0 0 0-2 2 2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2 2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm0 13V4a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2zM5 0h1a1 1 0 0 1 1 1v1H5a1 1 0 0 1-1-1V0a1 1 0 0 1 1-1z"/><path d="M0 4a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm2 0v10h7V4H2z"/></svg>
                    <svg class="copied-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="var(--color-accent-leaf-green)"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/></svg>
                    <span class="button-text">Copy</span>
                </button>
            </div>
            <p class="snippet-explanation">
                This function turns the Debugger towards the bug and shoots at them. The <code>FindAngleToEnemy()</code> function calculates the angle to the bug, and <code>Shoot(5)</code> fires 5 shots.
            </p>
            <div class="code-block-wrapper">
                <pre><code class="language-csharp">function TurnToEnemyShoot()
{
    TurnTo(FindAngleToEnemy());
    Shoot(5);
}
                </code></pre>
            </div>
        </section>

        <section class="snippet-entry">
            <div class="snippet-header">
                <div class="snippet-title-wrapper">
                    <h2 class="snippet-title">Simple Constant Move</h2>
                    <svg class="explanation-toggle-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"></path></svg>
                </div>
                 <button class="copy-button" aria-label="Copy code to clipboard">
                    <svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor"><path d="M13 0H6a2 2 0 0 0-2 2 2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2 2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm0 13V4a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2zM5 0h1a1 1 0 0 1 1 1v1H5a1 1 0 0 1-1-1V0a1 1 0 0 1 1-1z"/><path d="M0 4a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm2 0v10h7V4H2z"/></svg>
                    <svg class="copied-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="var(--color-accent-leaf-green)"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/></svg>
                    <span class="button-text">Copy</span>
                </button>
            </div>
            <p class="snippet-explanation">
                This command will keep the Debugger moving forward for a while. However, it is not meant to run the whole time. Press <code>'Esc'</code> to stop moving, otherwise you will run out of Allocated Memory.
            </p>
            <div class="code-block-wrapper">
                <pre><code class="language-csharp">function ConstantMove()
{
    // Make sure to Press 'Esc' to Stop Moving when you reach your desired position
    Move(100);
}
                </code></pre>
            </div>
        </section>

        <section class="snippet-entry">
            <div class="snippet-header">
                <div class="snippet-title-wrapper">
                    <h2 class="snippet-title">Simple Right Turn</h2>
                    <svg class="explanation-toggle-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"></path></svg>
                </div>
                 <button class="copy-button" aria-label="Copy code to clipboard">
                    <svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor"><path d="M13 0H6a2 2 0 0 0-2 2 2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2 2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm0 13V4a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2zM5 0h1a1 1 0 0 1 1 1v1H5a1 1 0 0 1-1-1V0a1 1 0 0 1 1-1z"/><path d="M0 4a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm2 0v10h7V4H2z"/></svg>
                    <svg class="copied-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="var(--color-accent-leaf-green)"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/></svg>
                    <span class="button-text">Copy</span>
                </button>
            </div>
            <p class="snippet-explanation">
                This will make the Debugger turn right by 90 degrees. Feel free to stop the command once you are facing the desired direction.
            </p>
            <div class="code-block-wrapper">
                <pre><code class="language-csharp">function TurnRight()
{
    Turn(90);
    // You can stop the command at any time
}
                </code></pre>
            </div>
        </section>

        <section class="snippet-entry">
            <div class="snippet-header">
                <div class="snippet-title-wrapper">
                    <h2 class="snippet-title">Battle Mode</h2>
                    <svg class="explanation-toggle-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"></path></svg>
                </div>
                 <button class="copy-button" aria-label="Copy code to clipboard">
                    <svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor"><path d="M13 0H6a2 2 0 0 0-2 2 2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2 2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm0 13V4a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2zM5 0h1a1 1 0 0 1 1 1v1H5a1 1 0 0 1-1-1V0a1 1 0 0 1 1-1z"/><path d="M0 4a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm2 0v10h7V4H2z"/></svg>
                    <svg class="copied-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="var(--color-accent-leaf-green)"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/></svg>
                    <span class="button-text">Copy</span>
                </button>
            </div>
            <p class="snippet-explanation">
                This function will make the Debugger shoot at the bug and then dodge to the right. It will repeat this action 5 times. Bear in mind that if there are no bugs in the arena, the Debugger rotate in a random direction.
            </p>
            <div class="code-block-wrapper">
                <pre><code class="language-csharp">function BattleMode()
{
    Repeat(5)
    {
        // find enemy and shoot
        TurnTo(FindAngleToEnemy());
        Shoot(5);

        // after shooting, dodge to the right
        Turn(90);
        Move(5);
    }
}
                </code></pre>
            </div>
        </section>
    </main>

    <div id="copyPopup" class="copy-popup">
        <svg id="popupIconSuccess" class="popup-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--color-accent-leaf-green)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
            <polyline points="22 4 12 14.01 9 11.01"></polyline>
        </svg>
        <svg id="popupIconError" class="popup-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--color-error-red)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="8" x2="12" y2="12"></line>
            <line x1="12" y1="16" x2="12.01" y2="16"></line>
        </svg>
        <span id="popupMessage">Code copied to clipboard!</span>
    </div>

    <footer>
        <p>&copy; <span id="currentYear"></span> Sai Mangipudi. Help me I literally spent like 8 hours on this stupid thing please.</p>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-csharp.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Apply Prism highlighting (Prism auto-highlights by default if correctly linked)
            // Prism.highlightAll(); // Can be called explicitly if needed

            // --- Page Load Animations ---
            const mainHeader = document.querySelector('header');
            const copyInstructions = document.querySelector('.copy-instructions');
            if (mainHeader) mainHeader.style.animationPlayState = 'running';
            if (copyInstructions) copyInstructions.style.animationPlayState = 'running';


            // --- Staggered Load for Snippet Entries ---
            const snippetEntries = document.querySelectorAll('.snippet-entry');
            const entryObserverOptions = {
                root: null,
                rootMargin: '0px',
                threshold: 0.1 // At least 10% visible
            };

            const entryObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach((entry, index) => {
                    if (entry.isIntersecting) {
                        // Apply staggered delay directly
                        entry.target.style.transitionDelay = `${index * 100}ms`;
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target); // Stop observing once visible
                    }
                });
            }, entryObserverOptions);

            snippetEntries.forEach(entry => {
                entryObserver.observe(entry);
            });


            // --- Custom Line Numbering ---
            const codeBlocks = document.querySelectorAll('pre > code[class*="language-"]');
            codeBlocks.forEach(codeBlock => {
                const preElement = codeBlock.parentElement;
                if (preElement && preElement.tagName === 'PRE') {
                    setTimeout(() => { // Ensure Prism is done
                        const rawCode = codeBlock.textContent;
                        const lines = rawCode.split(/\r\n|\r|\n/);
                        const lineCount = (lines.length > 0 && lines[lines.length - 1] === '') ? lines.length - 1 : lines.length;

                        if (preElement.querySelector('.custom-line-numbers-column')) return;

                        let lineNumbersHTML = '';
                        for (let i = 1; i <= lineCount; i++) {
                            lineNumbersHTML += i + '\n';
                        }

                        const lineNumbersSpan = document.createElement('span');
                        lineNumbersSpan.className = 'custom-line-numbers-column';
                        lineNumbersSpan.textContent = lineNumbersHTML.trimEnd();
                        preElement.insertBefore(lineNumbersSpan, codeBlock);
                    }, 0);
                }
            });

            // --- Popup and Enhanced Copy Functionality ---
            const popup = document.getElementById('copyPopup');
            const popupMessage = document.getElementById('popupMessage');
            const popupIconSuccess = document.getElementById('popupIconSuccess');
            const popupIconError = document.getElementById('popupIconError');
            let popupTimeout;

            function showPopup(message, isSuccess) {
                clearTimeout(popupTimeout);
                popupMessage.textContent = message;
                if (isSuccess) {
                    popup.classList.remove('error'); popup.classList.add('success');
                    popupIconSuccess.style.display = 'block'; popupIconError.style.display = 'none';
                } else {
                    popup.classList.remove('success'); popup.classList.add('error');
                    popupIconSuccess.style.display = 'none'; popupIconError.style.display = 'block';
                }
                popup.classList.add('show');
                popupTimeout = setTimeout(() => popup.classList.remove('show'), 3000);
            }

            function copyCode(codeBlockElement, eventSourceElement) {
                if (codeBlockElement) {
                    const codeToCopy = codeBlockElement.textContent;
                    navigator.clipboard.writeText(codeToCopy).then(() => {
                        showPopup('Code copied to clipboard!', true);
                        if (eventSourceElement && eventSourceElement.classList.contains('copy-button')) {
                            const button = eventSourceElement;
                            const buttonTextSpan = button.querySelector('.button-text');
                            button.classList.add('copied'); // For icon swap
                            if (buttonTextSpan) {
                                const originalText = buttonTextSpan.textContent;
                                buttonTextSpan.textContent = 'Copied!';
                                setTimeout(() => {
                                    buttonTextSpan.textContent = originalText;
                                    button.classList.remove('copied'); // Reset icon
                                }, 2500);
                            }
                        }
                        // Visual feedback for snippet entry card
                        if (eventSourceElement && eventSourceElement.classList.contains('snippet-entry')) {
                            eventSourceElement.classList.add('copied-feedback');
                            setTimeout(() => eventSourceElement.classList.remove('copied-feedback'), 600);
                        }

                    }).catch(err => {
                        console.error('Failed to copy text: ', err);
                        showPopup('Error copying code.', false);
                    });
                } else {
                    console.error('Could not find code block to copy.');
                    showPopup('Error: Code block not found.', false);
                }
            }

            document.querySelectorAll('.copy-button').forEach(button => {
                button.addEventListener('click', (event) => {
                    event.stopPropagation(); // Prevent snippet entry click if button is clicked
                    const snippetEntry = button.closest('.snippet-entry');
                    const codeBlock = snippetEntry.querySelector('pre code.language-csharp');
                    copyCode(codeBlock, button);
                });
            });

            // --- Expand/Collapse Snippet Explanation & Whole Card Copy ---
            document.querySelectorAll('.snippet-entry').forEach(entry => {
                const header = entry.querySelector('.snippet-header');
                const explanation = entry.querySelector('.snippet-explanation');
                const toggleIcon = entry.querySelector('.explanation-toggle-icon');

                if (header && explanation && toggleIcon) {
                    header.addEventListener('click', (event) => {
                        // Only toggle if the click was on the header itself or the title/icon area, not the copy button
                        if (!event.target.closest('.copy-button')) {
                            explanation.classList.toggle('expanded');
                            toggleIcon.classList.toggle('expanded');
                        }
                    });
                }

                // Click on card body (not header, not copy button) to copy
                const codeBlockWrapper = entry.querySelector('.code-block-wrapper');
                if(codeBlockWrapper) {
                    codeBlockWrapper.addEventListener('click', (event) => {
                        // Check if the click is not on scrollbars of the pre element
                        const preElement = entry.querySelector('pre');
                        if (preElement && event.offsetX < preElement.clientWidth && event.offsetY < preElement.clientHeight) {
                             const codeBlock = entry.querySelector('pre code.language-csharp');
                             copyCode(codeBlock, entry); // Pass entry for feedback
                        }
                    });
                }
                // Also make the snippet explanation (when visible) clickable to copy
                if(explanation) {
                    explanation.addEventListener('click', (event) => {
                        if (explanation.classList.contains('expanded')) { // Only if visible/expanded
                             const codeBlock = entry.querySelector('pre code.language-csharp');
                             copyCode(codeBlock, entry);
                        }
                    });
                }
            });
        });

        document.getElementById('currentYear').textContent = new Date().getFullYear();
    </script>
</body>
</html>