<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kanban Project Board</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        html {
            background-color: #0c111c; /* Ensures the root background is dark */
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0c111c; /* Darker blue-gray */
            position: relative;
            overflow-x: hidden; /* Hide horizontal overflow on the body */
        }

        /* Aurora background effect */
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            /* background-image: 
                radial-gradient(circle at 15% 25%, rgba(59, 130, 246, 0.2), transparent 30%),
                radial-gradient(circle at 85% 75%, rgba(139, 92, 246, 0.2), transparent 40%); */
            z-index: -1;
            /* animation: aurora 20s infinite linear; */
        }

        @keyframes aurora {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Custom scrollbar for the board */
        #kanban-board-container::-webkit-scrollbar {
            height: 12px;
        }
        #kanban-board-container::-webkit-scrollbar-track {
            background: rgba(30, 41, 59, 0.5); /* bg-slate-800/50 */
            border-radius: 6px;
        }
        #kanban-board-container::-webkit-scrollbar-thumb {
            background: rgba(71, 85, 105, 0.7); /* bg-slate-600/70 */
            border-radius: 6px;
        }
        #kanban-board-container::-webkit-scrollbar-thumb:hover {
            background: #64748b; /* bg-slate-500 */
        }

        /* Modal Animation */
        #task-modal {
            transition: opacity 0.2s ease-in-out, visibility 0.2s ease-in-out;
            opacity: 0;
            visibility: hidden;
        }
        #task-modal.is-open {
            opacity: 1;
            visibility: visible;
        }
        #modal-content {
            transform: scale(0.95) translateY(1rem);
            transition: transform 0.2s ease-in-out;
        }
        #task-modal.is-open #modal-content {
            transform: scale(1) translateY(0);
        }

        /* Custom checkbox style & animation */
        .task-checkbox:checked {
            background-color: #22c55e; /* green-500 */
            border-color: #16a34a; /* green-600 */
        }
        .task-checkbox::before {
            content: 'âœ“';
            color: white;
            font-size: 12px;
            line-height: 16px;
            width: 16px;
            height: 16px;
            text-align: center;
            display: block;
            transform: scale(0);
            transition: transform 150ms cubic-bezier(0.18, 0.89, 0.32, 1.28); /* Bouncy effect */
        }
        .task-checkbox:checked::before {
            transform: scale(1);
        }

        /* Card hover animation */
        .member-card {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .member-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2), 0 4px 6px -2px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="text-gray-200 antialiased h-screen flex flex-col">

    <header class="container mx-auto p-4 sm:p-6 lg:p-8 flex-shrink-0 text-center">
        <h1 class="text-3xl font-bold text-white">Project <b><i>"Trickshot"</i></b> - Kanban Board</h1>
        <p class="text-gray-400 mt-1">Click on a team member's card to view their tasks and progress for each phase.</p>
    </header>

    <div id="kanban-board-container" class="flex-grow flex justify-start lg:justify-center p-4 sm:p-6 lg:p-8 overflow-x-auto">
        <main id="kanban-board" class="flex items-start gap-6">
            <!-- Kanban Lists (Phases) will be generated by JS here -->
        </main>
    </div>

    <!-- Task Modal -->
    <div id="task-modal" class="fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center">
        <div id="modal-content" class="bg-gray-800 border border-gray-700 rounded-lg shadow-xl w-full max-w-lg max-h-[80vh] flex flex-col">
            <header class="flex items-center justify-between p-4 border-b border-gray-700">
                <div>
                    <h2 id="modal-title" class="text-xl font-bold text-white">Member Tasks</h2>
                    <p id="modal-subtitle" class="text-sm text-gray-400"></p>
                </div>
                <button id="modal-close-btn" class="text-gray-400 hover:text-white text-3xl leading-none">&times;</button>
            </header>
            <div id="modal-body" class="p-6 overflow-y-auto">
                <!-- Task content generated by JS -->
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- DATA SOURCE ---
            const projectData = {
                teamMembers: {
                    'Michael': { title: 'Game Designer', color: 'bg-rose-500', borderColor: 'border-rose-500' },
                    'Chris': { title: 'Lead 2D & 3D Artist', color: 'bg-sky-500', borderColor: 'border-sky-500' },
                    'Sai': { title: 'UI/UX Programmer', color: 'bg-amber-500', borderColor: 'border-amber-500' },
                    'Brandon': { title: 'Gameplay Programmer', color: 'bg-violet-500', borderColor: 'border-violet-500' }
                },
                phases: [
                    {
                        name: 'Pre-Production',
                        dates: '<b>W1</b> (08/28) - <b>W5</b> (09/25)',
                        icon: `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h9"/><path d="M4 20h2"/><path d="M18 4h-2"/><path d="M12 4H4"/><path d="M20 12h-2"/><path d="M4 12h10"/><path d="M18 20V4"/><path d="M12 20v-8"/><path d="M6 20v-4"/></svg>`,
                        tasksByMember: [
                            { member: 'Michael', tasks: [{ name: 'Define Game Features', completed: false }, { name: 'Initial Concept Art for Card', completed: false }] },
                            { member: 'Chris', tasks: [{ name: 'Research Art Styles', completed: false }, { name: 'Art Technical Feasibility Study', completed: false }] },
                            { member: 'Brandon', tasks: [{ name: 'Create Game Prototype', completed: false }, { name: 'Define Scoring Formulas', completed: false }] },
                            { member: 'Sai', tasks: [{ name: 'Research Mobile Game UI Animations', completed: false }, { name: 'Create Project Schedule', completed: false }, { name: 'Research Gambling/Gacha Game UI Animations', completed: false }] }
                        ]
                    },
                    {
                        name: 'Alpha',
                        dates: '<b>W5</b> (09/25) - <b>W9</b> (10/23)',
                        icon: `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 14 4-4"/><path d="M3.34 19a10 10 0 1 1 17.32 0"/><path d="m12 20 4-4"/></svg>`,
                        tasksByMember: [
                            { member: 'Michael', tasks: [{ name: 'TBD', completed: false }] },
                            { member: 'Chris', tasks: [{ name: 'TBD', completed: false }] },
                            { member: 'Brandon', tasks: [{ name: 'TBD', completed: false }] },
                            { member: 'Sai', tasks: [{ name: 'TBD', completed: false }] }
                        ]
                    },
                    {
                        name: 'Beta',
                        dates: '<b>W9</b> (10/23) - <b>W13</b> (11/20)',
                        icon: `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 8V4H8"/><rect width="16" height="12" x="4" y="8" rx="2"/><path d="M2 14h2"/><path d="M20 14h2"/><path d="M15 13v2"/><path d="M9 13v2"/></svg>`,
                        tasksByMember: [
                           { member: 'Michael', tasks: [{ name: 'TBD', completed: false }] },
                           { member: 'Chris', tasks: [{ name: 'TBD', completed: false }] },
                           { member: 'Brandon', tasks: [{ name: 'TBD', completed: false }] },
                           { member: 'Sai', tasks: [{ name: 'TBD', completed: false }] }
                        ]
                    },
                    {
                        name: 'Release & Final Polish',
                        dates: '<b>W15</b> (12/04) - <b>W16</b> (12/09)',
                        icon: `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"/><path d="m9 12 2 2 4-4"/></svg>`,
                        tasksByMember: [
                           { member: 'Michael', tasks: [{ name: 'TBD', completed: false }] },
                           { member: 'Chris', tasks: [{ name: 'TBD', completed: false }] },
                           { member: 'Brandon', tasks: [{ name: 'TBD', completed: false }] },
                           { member: 'Sai', tasks: [{ name: 'TBD', completed: false }] }
                        ]
                    }
                ]
            };

            const kanbanBoard = document.getElementById('kanban-board');
            const modal = document.getElementById('task-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalSubtitle = document.getElementById('modal-subtitle');
            const modalBody = document.getElementById('modal-body');
            const modalCloseBtn = document.getElementById('modal-close-btn');

            function calculateMemberProgress(member) {
                if (member.tasks.length === 0) return { percent: 0, text: '0/0' };
                const completedTasks = member.tasks.filter(t => t.completed).length;
                const totalTasks = member.tasks.length;
                const percent = totalTasks > 0 ? (completedTasks / totalTasks) * 100 : 0;
                return { percent: Math.round(percent), text: `${completedTasks}/${totalTasks}` };
            }

            function renderBoard() {
                kanbanBoard.innerHTML = '';
                projectData.phases.forEach((phase, phaseIndex) => {
                    const listEl = document.createElement('div');
                    listEl.className = 'flex-shrink-0 w-80 bg-gray-800/50 backdrop-blur-sm rounded-lg shadow-lg flex flex-col h-min';
                    
                    let listHTML = `
                        <header class="p-4 border-b border-white/10 flex items-start gap-3">
                            <span class="text-gray-400 mt-1">${phase.icon || ''}</span>
                            <div>
                                <h2 class="text-lg font-bold text-white leading-tight">${phase.name}</h2>
                                <p class="text-xs text-gray-500 font-medium">${phase.dates || ''}</p>
                            </div>
                        </header>
                        <div class="p-4 space-y-4 overflow-y-auto">
                    `;

                    phase.tasksByMember.forEach((member, memberIndex) => {
                        const memberDetails = projectData.teamMembers[member.member] || {};
                        const progress = calculateMemberProgress(member);
                        listHTML += `
                            <div class="member-card bg-gray-900/50 p-4 rounded-lg shadow-md cursor-pointer border-l-4 ${memberDetails.borderColor || 'border-gray-700'}" data-phase-index="${phaseIndex}" data-member-index="${memberIndex}">
                                <h3 class="font-semibold text-white">${member.member}</h3>
                                <p class="text-xs text-gray-400">${memberDetails.title || 'Team Member'}</p>
                                <div class="mt-3">
                                    <div class="flex justify-between items-center text-xs text-gray-400 mb-1">
                                        <span>Progress</span>
                                        <span data-progress-text="${phaseIndex}-${memberIndex}">${progress.text}</span>
                                    </div>
                                    <div class="w-full bg-gray-700 rounded-full h-2.5">
                                        <div class="h-2.5 rounded-full transition-all duration-500 ${memberDetails.color || 'bg-blue-600'}" style="width: ${progress.percent}%" data-progress-bar="${phaseIndex}-${memberIndex}"></div>
                                    </div>
                                </div>
                            </div>
                        `;
                    });

                    listHTML += '</div>';
                    listEl.innerHTML = listHTML;
                    kanbanBoard.appendChild(listEl);
                });
            }

            function updateProgressDisplay(phaseIndex, memberIndex) {
                const member = projectData.phases[phaseIndex].tasksByMember[memberIndex];
                const progress = calculateMemberProgress(member);
                const progressBar = document.querySelector(`[data-progress-bar="${phaseIndex}-${memberIndex}"]`);
                const progressText = document.querySelector(`[data-progress-text="${phaseIndex}-${memberIndex}"]`);

                if (progressBar) progressBar.style.width = `${progress.percent}%`;
                if (progressText) progressText.innerText = progress.text;
            }

            function showTaskModal(phaseIndex, memberIndex) {
                const phase = projectData.phases[phaseIndex];
                const member = phase.tasksByMember[memberIndex];
                const memberDetails = projectData.teamMembers[member.member] || {};

                modalTitle.textContent = member.member;
                modalSubtitle.textContent = `${memberDetails.title} - Tasks for ${phase.name}`;
                modalBody.innerHTML = '';

                let tasksHTML = '<ul class="space-y-3">';
                member.tasks.forEach((task, taskIndex) => {
                    tasksHTML += `
                        <li class="flex items-center">
                            <label class="flex items-center text-sm cursor-pointer w-full p-2 rounded-md hover:bg-gray-700/50">
                                <input type="checkbox" 
                                       class="task-checkbox appearance-none w-4 h-4 rounded-sm bg-gray-700 border border-gray-600 mr-3 transition-all flex-shrink-0" 
                                       ${task.completed ? 'checked' : ''}
                                       data-phase-index="${phaseIndex}"
                                       data-member-index="${memberIndex}"
                                       data-task-index="${taskIndex}">
                                <span class="${task.completed ? 'line-through text-gray-500' : 'text-gray-200'}">${task.name}</span>
                            </label>
                        </li>
                    `;
                });
                tasksHTML += '</ul>';
                modalBody.innerHTML = tasksHTML;
                modal.classList.add('is-open');
            }

            function hideTaskModal() {
                modal.classList.remove('is-open');
            }

            // --- EVENT LISTENERS ---
            kanbanBoard.addEventListener('click', (e) => {
                const card = e.target.closest('[data-phase-index]');
                if (card) {
                    const { phaseIndex, memberIndex } = card.dataset;
                    showTaskModal(parseInt(phaseIndex), parseInt(memberIndex));
                }
            });

            modal.addEventListener('change', (e) => {
                if (e.target.matches('.task-checkbox')) {
                    const { phaseIndex, memberIndex, taskIndex } = e.target.dataset;
                    const isChecked = e.target.checked;
                    projectData.phases[phaseIndex].tasksByMember[memberIndex].tasks[taskIndex].completed = isChecked;
                    e.target.nextElementSibling.classList.toggle('line-through', isChecked);
                    e.target.nextElementSibling.classList.toggle('text-gray-500', isChecked);
                    e.target.nextElementSibling.classList.toggle('text-gray-200', !isChecked);
                    updateProgressDisplay(phaseIndex, memberIndex);
                }
            });

            modalCloseBtn.addEventListener('click', hideTaskModal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    hideTaskModal();
                }
            });

            // Initial Render
            renderBoard();
        });
    </script>
</body>
</html>
